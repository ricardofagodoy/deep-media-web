<ngx-spinner bdColor="rgba(0, 0, 0, 0.8)" size="default" color="#fff" type="ball-scale-ripple-multiple"
  fullScreen="true">
  <p style="color: white"> Loading... </p>
</ngx-spinner>

<div class=" content">
  <div class="row">
    <div class=" col-md-12">
      <div class="card">
        <div class=" card-header">
          <h5 class=" card-category">Latest Executions</h5>
          <h2 class=" card-title">Optimizations</h2>
        </div>
        <div class="card-body" *ngIf="optimizations | async as opts">

          <!-- Future -->
          <div class="next-optimization" *ngFor="let future of opts.future">
            <b>[{{connector_names[future.type]}}]</b> Next optimization scheduled to <b>{{future.next_run}}</b>
          </div>

          <!-- History -->
          <table class="table">
            <thead>
              <tr>
                <th class="text-center">Date/Hour</th>
                <th class="text-center">Campaign</th>
                <th class="text-center">Target AdCost</th>
                <th class="text-center">Margin</th>
                <th class="text-center">Optimization Metric</th>
                <th class="text-center">Before</th>
                <th class="text-center">After</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let row of opts.history">
                <td class="text-center">{{row.date}}</td>
                <td class="text-center">{{row.campaign}}</td>
                <td class="text-center">{{row.target * 100}}%</td>
                <td class="text-center">{{row.margin * 100}}%</td>
                <td class="text-center">{{row.optimize}}</td>
                <td class="text-center">{{row.before}}</td>
                <td class="text-center">{{row.after}}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>